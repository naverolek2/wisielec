<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body onload="start()">
    <div id="kontenerek">
        <div class="row text-center m-5" id="header">
            <h1>Wisielec</h1>
        </div>
        <div class="row m-5" id="main">
            <div class="col-6 text-center" id="image">
                <img class="img-fluid" src="0.png" id="hangmanPic"><br>
                <span id="attemptCounter">Próby: 0/6</span>
            </div>
            <div class="col-6 text-center pt-5" id="password" style="letter-spacing: 1rem;">
                 <!-- __________   -->
            </div>    
        </div>
        <div class="row m-5">
            <div class="col text-center" id="keyboard">
                

            </div>
        </div>
    </div>

<script>
var passw;
var attempts;
var passArr = Array();
var maxAttempts = 6;
function start() {
    for (let code = 65; code < 91; code++) { 
let char = String.fromCharCode(code); // fromCharCode zmienia np. 65 --> A itp. (ASCII)
let button = document.createElement('button');
button.innerHTML = char;
button.classList.add('btn');
button.classList.add('btn-primary');
button.classList.add('m-1');
button.addEventListener("click", zgadywanie);
document.getElementById('keyboard').appendChild(button);
}
    
    
    passw = prompt("Podaj wyraz");
    passw = passw.toUpperCase();
    passArr = new Array(passw.length);
    passArr.fill(true);
    document.getElementById('password').innerHTML = kreski();
    attempts = 0 
        document.getElementById('hangmanPic').src = attempts + ".png";

        
}

function kreski() {
    let kreski1 = passw.split("");
    let kreskiArr = Array();
    for(let i = 0; i < kreski1.length; i++) {
    if (passArr[i]) 
         kreskiArr.push("_");   

    else 
         kreskiArr.push(kreski1[i]);
        }   
        let kArrStr = kreskiArr.join("");  // Łączy pojedyńcze literki np (A, R, B, U, Z) w słowo (ARBUZ).
        return kArrStr;
       
}


function zgadywanie(wydarzenie) {
let success = false;
let char = wydarzenie.srcElement.innerHTML;
let passArr1 = passw.split("");
for(i = 0; i < passArr1.length; i++) {
    if (passArr1[i] == char) {
        passArr[i] = false;
        success = true;
    }
}
document.getElementById('password').innerHTML = kreski();
wydarzenie.srcElement.disabled = true;
if(success == false) {
    attempts++; //zamiennik dla attempts + 1.
    licznikPrób();
    document.getElementById('hangmanPic').src = attempts + ".png";
}

// domyślnie na true więc nie trzeba pisać czyPrzegrałeś() == true.
if(czyPrzegrałeś()) {
alert("Przegrałeś, może następnym razem ci się uda!");
}
if(czyWygrałeś()){
alert("Gratulacje, wygrałeś!");
}
}

function licznikPrób() {
if(attempts == 1) document.getElementById('attemptCounter').innerHTML = "Próby: " + attempts + "/" + maxAttempts;

else if (attempts == 2) document.getElementById('attemptCounter').innerHTML = "Próby: " + attempts + "/" + maxAttempts;

else if (attempts == 3) document.getElementById('attemptCounter').innerHTML = "Próby: " + attempts + "/" + maxAttempts;

else if (attempts == 4) document.getElementById('attemptCounter').innerHTML = "Próby: " + attempts + "/" + maxAttempts;

else if (attempts == 5) document.getElementById('attemptCounter').innerHTML = "Próby: " + attempts + "/" + maxAttempts;

else if (attempts == 6) document.getElementById('attemptCounter').innerHTML = "Próby: " + attempts + "/" + maxAttempts;
// Ten else został stworzony na przypadek wywalenia się programu w jakimś momencie. 
else document.getElementById('attemptCounter').innerHTML = "Błąd programu";
}


function czyPrzegrałeś(){ 
    if (maxAttempts <= attempts) {
        return true;
    }
    else return false;
}

function czyWygrałeś() {
            for (let i = 0; i < passArr.length; i++) {
                if(passArr[i] == true) {
                    return false;
                }
                     
            }
            return true; 
}




</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
crossorigin="anonymous"></script>
</body>
</html>